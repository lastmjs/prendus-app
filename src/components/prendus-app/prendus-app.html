Skip to content
This repository
Search
Pull requests
Issues
Marketplace
Explore
 @bmackley
 Sign out
 Unwatch 2
  Star 0  Fork 0 lastmjs/prendus-app Private
 Code  Issues 0  Pull requests 5  Projects 0  Wiki  Insights
Branch: ben-app-layout Find file Copy pathprendus-app/src/components/prendus-app/prendus-app.html
8a57796  4 days ago
 Ben Mackley working on the courses
4 contributors @lastmjs @trevorhere @benjaminogles @bmackley
RawBlameHistory
217 lines (187 sloc)  19.3 KB
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../../bower_components/app-route/app-location.html">
<link rel="import" href="../../bower_components/iron-lazy-pages/iron-lazy-pages.html">
<link rel="import" href="../../bower_components/paper-toast/paper-toast.html">
<link rel="import" href="../prendus-ui/prendus-styles.html">
<link rel="import" href="../prendus-navbar/prendus-navbar.html">
<link rel="import" href="../prendus-menu/prendus-menu.html">
<link rel="import" href="../prendus-footer/prendus-footer-main.html">
<link rel="import" href="../prendus-footer/prendus-footer-marketing.html">
<!--Do not lazy load the open source component, we need it to comply-->
<link rel="import" href="../prendus-open-source/prendus-open-source.html">
<link rel="import" href="../prendus-notification/prendus-notification.html">
<link rel="import" href="../../node_modules/redux-store-element/redux-store.html">
<link rel="import" href="../../bower_components/polymer/lib/elements/dom-if.html">

<dom-module id="prendus-app">
    <template>
      <style include ="prendus-styles">
        #main-content{
          background-color: var(--prendus-off-white);
          /*This is the width of the menu. At 640px it collapses.*/
          margin-right: 256px;
        }
        #app-container {
  				display: flex;
  				flex-direction: column;
  				align-items: center;
  				position: relative;
          min-height: calc(100vh - 150px);
  			}
  			.app-window {
  				box-sizing: border-box;
  				margin: auto;
  				margin: 20px;
  				/*max-width: 800px;*/
          max-width: 80%;
  				width: 100%;
  			}
        .authentication-pages {
          box-sizing: border-box;
          margin: auto;
          margin: 10vh;
          max-width: 80%;
          width: 100%;
        }
        .app-window-wide {
          max-width: 1200px;
        }
        .landing{
          max-width: 100%;
          margin:0;
          padding:0;
        }
  			.loading-spinner {
  				position: fixed;
  				left: calc(50% - 30px);
  				bottom: calc(50% - 30px);
  				width: 60px;
  				height: 60px;
  			}
  			@media (max-width: 768px) {
  				.app-window {
  					padding: 10px 20px;
  				}
          .authentication-pages {
            padding: 3vh 3vw;
          }
  			}
        @media (max-width: 640px) {
          #main-content{
            margin-right: 0;
          }
        }
        */
      </style>
        <redux-store id="reduxStoreElement" root-reducer="[[rootReducer]]" on-statechange="stateChange" action="[[action]]"></redux-store>

        <!--TODO get rid of the two-way data binding, listen to events and integrate with Redux-->
        <!--TODO update app-location once this PR goes through: https://github.com/PolymerElements/iron-location/pull/83 -->
        <app-location id="appLocation" route="{{route}}" query-params="{{queryParams}}"></app-location>

        <app-route route="[[route]]" pattern="/" active="{{rootRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/what-is-prendus" active="{{whatIsPrendusRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/why-prendus" active="{{whyPrendusRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/course-setup" active="{{courseSetupRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/how-it-works" active="{{howItWorksRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/research" active="{{researchRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/oer" active="{{oerRouteActive}}"></app-route>

        <app-route route="[[route]]" pattern="/signup" active="{{signupRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/login" active="{{loginRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/authenticate" active="{{authenticateRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/open-source" active="{{openSourceRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/password-reset/:jwt" data="{{passwordResetRouteData}}" active="{{passwordResetRouteActive}}"></app-route>

        <app-route route="[[route]]" pattern="/courses" data="{{coursesRouteData}}" active="{{coursesRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/course/create" data="{{createCourseRouteData}}" active="{{createCourseRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/course/:courseId/view" data="{{viewCourseRouteData}}" active="{{viewCourseRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/course/:courseId/edit" data="{{editCourseRouteData}}" active="{{editCourseRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/course/:courseId/payment" data="{{paymentCourseRouteData}}" active="{{paymentCourseRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/course/:courseId/question-ratings" data="{{courseQuestionRatingsRouteData}}" active="{{courseQuestionRatingsRouteActive}}"></app-route>

        <app-route route="[[route]]" pattern="/assignment/create" data="{{createAssignmentRouteData}}" active="{{createAssignmentRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/assignment/demo" data="{{demoAssignmentRouteData}}" active="{{demoAssignmentRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/assignment/:assignmentId/create" data="{{assignmentCreateRouteData}}" active="{{assignmentCreateRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/assignment/:assignmentId/review" data="{{assignmentReviewRouteData}}" active="{{assignmentReviewRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/assignment/:assignmentId/grade" data="{{assignmentGradeRouteData}}" active="{{assignmentGradeRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/assignment/:assignmentId/quiz" data="{{assignmentQuizRouteData}}" active="{{assignmentQuizRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/assignment/:assignmentId/edit" data="{{editAssignmentRouteData}}" active="{{editAssignmentRouteActive}}"></app-route>

        <app-route route="[[route]]" pattern="/learning-structure" data="{{learningStructureRouteData}}" active="{{learningStructureRouteActive}}"></app-route>

        <app-route route="[[route]]" pattern="/teacher-approval" data="{{teacherApprovalRouteData}}" active="{{teacherApprovalRouteActive}}"></app-route>

        <app-route route="[[route]]" pattern="/discipline/create" data="{{createDisciplineRouteData}}" active="{{createDisciplineRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/discipline/:disciplineId/view" data="{{viewDisciplineRouteData}}" active="{{viewDisciplineRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/discipline/:disciplineId/edit" data="{{editDisciplineRouteData}}" active="{{editDisciplineRouteActive}}"></app-route>

        <app-route route="[[route]]" pattern="/subject/create" data="{{createSubjectRouteData}}" active="{{createSubjectRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/subject/:subjectId/view" data="{{viewSubjectRouteData}}" active="{{viewSubjectRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/subject/:subjectId/edit" data="{{editSubjectRouteData}}" active="{{editSubjectRouteActive}}"></app-route>

        <app-route route="[[route]]" pattern="/concept/create" data="{{createConceptRouteData}}" active="{{createConceptRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/concept/:conceptId/view" data="{{viewConceptRouteData}}" active="{{viewConceptRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/concept/:conceptId/edit" data="{{editConceptRouteData}}" active="{{editConceptRouteActive}}"></app-route>

        <app-route route="[[route]]" pattern="/question/create" data="{{createQuestionRouteData}}" active="{{createQuestionRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/question/:questionId/view" data="{{viewQuestionRouteData}}" active="{{viewQuestionRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/question/:questionId/edit" data="{{editQuestionRouteData}}" active="{{editQuestionRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/question/:questionId/demo" data="{{editDemoQuestionRouteData}}" active="{{editDemoQuestionRouteActive}}"></app-route>
        <app-route route="[[route]]" pattern="/question/examples" data="{{examplesQuestionRouteData}}" active="{{examplesQuestionRouteActive}}"></app-route>

        <app-route route="[[route]]" pattern="/questions/view" data="{{viewQuestionsRouteData}}" active="{{viewQuestionsRouteActive}}"></app-route>

        <prendus-navbar></prendus-navbar>
        <dom-if if="[[user]]">
          <template>
          <prendus-menu></prendus-menu>
          </template>
        </dom-if>

        <div id="main-content">
          <iron-lazy-pages id="app-container" attr-for-selected="show" selected="[[getSelectedView(rootRouteActive, whatIsPrendusRouteActive, whyPrendusRouteActive, courseSetupRouteActive, howItWorksRouteActive, researchRouteActive, oerRouteActive, coursesRouteActive, createCourseRouteActive, viewCourseRouteActive, editCourseRouteActive, paymentCourseRouteActive, courseQuestionRatingsRouteActive, createAssignmentRouteActive, assignmentCreateRouteActive, assignmentReviewRouteActive, assignmentGradeRouteActive, assignmentQuizRouteActive, editAssignmentRouteActive, createDisciplineRouteActive, viewDisciplineRouteActive, editDisciplineRouteActive, createSubjectRouteActive, viewSubjectRouteActive, editSubjectRouteActive, createConceptRouteActive, viewConceptRouteActive, editConceptRouteActive, teacherApprovalRouteActive, learningStructureRouteActive, signupRouteActive, loginRouteActive, authenticateRouteActive, viewQuestionRouteActive, createQuestionRouteActive, editQuestionRouteActive, viewQuestionsRouteActive, editDemoQuestionRouteActive, examplesQuestionRouteActive, openSourceRouteActive, demoAssignmentRouteActive, passwordResetRouteActive)]]">

              <prendus-home-page class="app-window landing" show="rootView" data-path="../prendus-home-page/prendus-home-page.html"></prendus-home-page>
              <prendus-what-is-prendus class="app-window" show="whatIsPrendusView" data-path="../prendus-marketing/prendus-what-is-prendus.html"></prendus-what-is-prendus>
              <prendus-why-prendus class="app-window landing" show="whyPrendusView" data-path="../prendus-marketing/prendus-why-prendus.html"></prendus-why-prendus>
              <prendus-how-it-works class="app-window landing" show="howItWorksView" data-path="../prendus-marketing/prendus-how-it-works.html"></prendus-how-it-works>
              <prendus-course-setup class="app-window" show="courseSetupView" data-path="../prendus-marketing/prendus-course-setup.html"></prendus-course-setup>
              <prendus-research class="app-window" show="researchView" data-path="../prendus-marketing/prendus-research-background.html"></prendus-research>
              <prendus-oer class="app-window landing" show="oerView" data-path="../prendus-marketing/prendus-oer.html"></prendus-oer>
              <prendus-open-source show="openSourceView"></prendus-open-source>

              <prendus-signup class="authentication-pages" show="signupView" redirect-url="[[queryParams.redirectUrl]]" data-path="../prendus-signup/prendus-signup.html"></prendus-signup>
              <prendus-login class="authentication-pages" show="loginView" redirect-url="[[queryParams.redirectUrl]]" data-path="../prendus-login/prendus-login.html"></prendus-login>
              <prendus-authenticate show="authenticateView" active="[[authenticateRouteActive]]" data-path="../prendus-authenticate/prendus-authenticate.html"></prendus-authenticate>
              <prendus-password-reset show="passwordResetView" active="[[passwordResetRouteActive]]" jwt="[[passwordResetRouteData.jwt]]" data-path="../prendus-password-reset/prendus-password-reset.html"></prendus-password-reset>

              <div show="viewQuestionView" class="viewQuestionContainer" data-path="../../node_modules/prendus-question-elements/prendus-view-question.html">
                  <div class="viewQuestionWrapper">
                      <prendus-view-question question-id="[[viewQuestionRouteData.questionId]]"></prendus-view-question>
                  </div>
              </div>
              <prendus-edit-question show="createQuestionView" user="[[user]]" user-token="[[userToken]]" data-path="../../node_modules/prendus-question-elements/prendus-edit-question.html"></prendus-edit-question>
              <prendus-edit-question show="editQuestionView" question-id="[[editQuestionRouteData.questionId]]" user="[[user]]" user-token="[[userToken]]" data-path="../../node_modules/prendus-question-elements/prendus-edit-question.html"></prendus-edit-question>
              <prendus-edit-question show="editDemoQuestionView" question-id="[[editDemoQuestionRouteData.questionId]]" user="[[user]]" user-token="[[userToken]]" no-save data-path="../../node_modules/prendus-question-elements/prendus-edit-question.html"></prendus-edit-question>
              <prendus-question-examples show="examplesQuestionView" data-path="../prendus-question-examples/prendus-question-examples.html"></prendus-question-examples>

              <prendus-questions-view show="viewQuestionsView" data-path="../prendus-questions/prendus-questions-view.html"></prendus-questions-view>

              <prendus-courses class="app-window" show="coursesView" data-path="../prendus-courses/prendus-courses.html"></prendus-courses>
              <prendus-course class="app-window" show="createCourseView" course-id="[[createCourseRouteData.courseId]]" mode="create" data-path="../prendus-course/prendus-course.html"></prendus-course>
              <prendus-course class="app-window" show="viewCourseView" course-id="[[viewCourseRouteData.courseId]]" mode="view" data-path="../prendus-course/prendus-course.html"></prendus-course>
              <prendus-course class="app-window" show="editCourseView" course-id="[[editCourseRouteData.courseId]]" mode="edit" data-path="../prendus-course/prendus-course.html"></prendus-course>
              <prendus-course-question-ratings class="app-window app-window-wide" show="courseQuestionRatingsView" course-id="[[courseQuestionRatingsRouteData.courseId]]" filter-by-user="[[_isStudent(user)]]" data-path="../prendus-course-question-ratings/prendus-course-question-ratings.html"></prendus-course-question-ratings>
              <prendus-course-payment show="paymentCourseView" course-id="[[paymentCourseRouteData.courseId]]" redirect-url="[[queryParams.redirectUrl]]" data-path="../prendus-course-payment/prendus-course-payment.html"></prendus-course-payment>

              <prendus-create-assignment-demo show="assignmentDemoView" assignment-id="[[demoAssignmentRouteData.assignmentId]]" data-path="../prendus-assignment/prendus-create-assignment-demo.html"></prendus-create-assignment-demo>
              <prendus-assignment class="app-window" show="createAssignmentView" assignment-id="[[createAssignmentRouteData.assignmentId]]" course-id="[[queryParams.courseId]]" mode="create" data-path="../prendus-assignment/prendus-assignment.html"></prendus-assignment>
              <prendus-create-assignment class="app-window" show="assignmentCreateView" assignment-id="[[assignmentCreateRouteData.assignmentId]]"  data-path="../prendus-assignment/prendus-create-assignment.html"></prendus-create-assignment>
              <prendus-review-assignment class="app-window" show="assignmentReviewView" assignment-id="[[assignmentReviewRouteData.assignmentId]]"  data-path="../prendus-assignment/prendus-review-assignment.html"></prendus-review-assignment>
              <prendus-grade-assignment class="app-window" show="assignmentGradeView" assignment-id="[[assignmentGradeRouteData.assignmentId]]"  data-path="../prendus-assignment/prendus-grade-assignment.html"></prendus-grade-assignment>
              <prendus-take-assignment class="app-window" show="assignmentQuizView" assignment-id="[[assignmentQuizRouteData.assignmentId]]"  data-path="../prendus-assignment/prendus-take-assignment.html"></prendus-take-assignment>
              <prendus-assignment class="app-window" show="editAssignmentView" assignment-id="[[editAssignmentRouteData.assignmentId]]" mode="edit" data-path="../prendus-assignment/prendus-assignment.html"></prendus-assignment>

              <prendus-learning-structure show="learningStructureView" mode="view" data-path="../prendus-learning-structure/prendus-learning-structure.html"></prendus-learning-structure>

              <prendus-discipline class="app-window" show="createDisciplineView" discipline-id="[[createDisciplineRouteData.disciplineId]]" mode="create" data-path="../prendus-learning-structure/prendus-discipline.html"></prendus-discipline>
              <prendus-discipline class="app-window" show="viewDisciplineView" discipline-id="[[viewDisciplineRouteData.disciplineId]]" mode="view" data-path="../prendus-learning-structure/prendus-discipline.html"></prendus-discipline>
              <prendus-discipline class="app-window" show="editDisciplineView" discipline-id="[[editDisciplineRouteData.disciplineId]]" mode="edit" data-path="../prendus-learning-structure/prendus-discipline.html"></prendus-discipline>

              <prendus-subject class="app-window" show="createSubjectView" subject-id="[[createSubjectRouteData.subjectId]]" discipline-id="[[queryParams.disciplineId]]" mode="create" data-path="../prendus-learning-structure/prendus-subject.html"></prendus-subject>
              <prendus-subject class="app-window" show="viewSubjectView" subject-id="[[viewSubjectRouteData.subjectId]]" mode="view" data-path="../prendus-learning-structure/prendus-subject.html"></prendus-subject>
              <prendus-subject class="app-window" show="editSubjectView" subject-id="[[editSubjectRouteData.subjectId]]" mode="edit" data-path="../prendus-learning-structure/prendus-subject.html"></prendus-subject>

              <prendus-teacher-approval show="teacherApprovalView" mode="view" data-path="../prendus-teacher-approval/prendus-teacher-approval.html"></prendus-teacher-approval>

              <prendus-concept class="app-window" show="createConceptView" concept-id="[[createConceptRouteData.conceptId]]" subject-id="[[queryParams.subjectId]]" mode="create" data-path="../prendus-learning-structure/prendus-concept.html"></prendus-concept>
              <prendus-concept class="app-window" show="viewConceptView" concept-id="[[viewConceptRouteData.conceptId]]" mode="view" data-path="../prendus-learning-structure/prendus-concept.html"></prendus-concept>
              <prendus-concept class="app-window" show="editConceptView" concept-id="[[editConceptRouteData.conceptId]]" mode="edit" data-path="../prendus-learning-structure/prendus-concept.html"></prendus-concept>

          </iron-lazy-pages>
        </div>
        <dom-if if="[[!user]]">
          <template>
            <prendus-footer-marketing></prendus-footer-marketing>
          </template>
        </dom-if>
        <prendus-notification notification="[[notification]]"></prendus-notification>
    </template>

    <script type="module" src="prendus-app.ts"></script>
</dom-module>
